{"mappings":"AAWA,MAAMA,EAAiBC,SAASC,uBAAuB,oBAAoB,GACrEC,EAAiBF,SAASC,uBAAuB,oBAAoB,GACrEE,EAAoBD,EAAeE,SAAS,GAC5CC,EAAqBH,EAAeE,SAAS,GAC7CE,EAAiBC,MAAMC,KAAKH,EAAmBD,UAC/CK,EAAeH,EAAeI,OACfP,EAAkBQ,aAAa,cAEpD,IAAIC,EAAgB,GAChBC,GAAqB,EA+BzB,SAASC,IACPZ,EAAea,UAAUC,OAAO,YAEhCd,EAAee,aAAa,eAAe,GAE3CC,GAA0B,GAG1BlB,SAASmB,oBAAoB,QAASC,GACtCpB,SAASmB,oBAAoB,UAAWE,E,CAG1C,SAASH,EAA0BI,GACjC,MAAMC,EAAalB,EAAmBD,SAASS,GACzCW,EAASnB,EAAmBD,SAASkB,GAEvCC,GACFA,EAAWR,UAAUC,OAAO,WAE1BQ,GACFA,EAAOT,UAAUU,IAAI,WAGvBZ,EAAqBS,C,CAGvB,SAASI,EAA0BC,EAAOC,GACxC,MAAMC,EAAYjB,EAEZkB,EAAezB,EAAmB0B,cACtC,gBAAgBF,MAEZG,EAAW3B,EAAmB0B,cAAc,gBAAgBJ,MAE9DG,GACFA,EAAaf,UAAUC,OAAO,YAG5BgB,GACFA,EAASjB,UAAUU,IAAI,YAGzBtB,EAAkB8B,YAAcL,EAChChB,EAAgBe,C,CAGlB,SAASP,EAAkBc,IACEhC,EAAeiC,SAASC,MAAMC,SAEvDvB,G,CAIJ,SAASO,EAA0Ba,GAEjC,GAAsB,KAAlBE,MAAME,SAAkBzB,EAAqBJ,EAAe,EAAG,CAEjEyB,EAAEK,iBACFrB,EAA0BL,EAAqB,E,CAUjD,GANsB,KAAlBuB,MAAME,SAAkBzB,EAAqB,IAC/CqB,EAAEK,iBACFrB,EAA0BL,EAAqB,IAI3B,KAAlBuB,MAAME,SAAoC,KAAlBF,MAAME,QAAgB,CAChDJ,EAAEK,iBAEF,MAAMf,EAASnB,EAAmBD,SAASS,GACrCc,EAAQH,GAAUA,EAAOb,aAAa,cAExCgB,IACF5B,EAAe4B,MAAQA,EACvBD,EAA0BC,EAAOH,EAAOS,cAE1CnB,G,CAIoB,KAAlBsB,MAAME,SACRxB,G,CA/GJX,EAAkBqC,iBAAiB,SAASN,KACxBhC,EAAea,UAAUoB,SAAS,YAStD,WAME,GALAjC,EAAea,UAAUU,IAAI,YAG7BvB,EAAee,aAAa,eAAe,GAEvCL,EAAe,CAIjBM,EAH2BZ,EAAemC,WACxCC,GAAMA,EAAG/B,aAAa,gBAAkBC,I,CAM5CZ,SAASwC,iBAAiB,QAASpB,GACnCpB,SAASwC,iBAAiB,UAAWnB,E,CArBnCsB,GAEA7B,GAAmB,IA8GvBf,EAAeyC,iBAAiB,UAAUN,IACxC,MAAMP,EAAQO,EAAEG,OAAOV,MAKvBD,EAA0BC,EAJOtB,EAAmBuC,iBAClD,gBAAgBjB,OAChB,GAEwDM,YAAY,IAIxE3B,EAAeuC,SAAQ,SAAUb,EAAUc,GACzCd,EAASQ,iBAAiB,SAASN,IACjC,MAAMP,EAAQO,EAAEG,OAAO1B,aAAa,cAGpCZ,EAAe4B,MAAQA,EACvBD,EAA0BC,EAAOO,EAAEG,OAAOJ,aAC1CnB,GAAmB,IAGrBkB,EAASQ,iBAAiB,cAAcN,IACtChB,EAA0B4B,EAAM,G","sources":["src/js/select-q.js"],"sourcesContent":["/* Features to make the selectCustom work for mouse users.\n\n- Toggle custom select visibility when clicking the \"box\"\n- Update custom select value when clicking in a option\n- Navigate through options when using keyboard up/down\n- Pressing Enter or Space selects the current hovered option\n- Close the select when clicking outside of it\n- Sync both selects values when selecting a option. (native or custom)\n\n*/\n\nconst elSelectNative = document.getElementsByClassName('js-selectNativeQ')[0];\nconst elSelectCustom = document.getElementsByClassName('js-selectCustomQ')[0];\nconst elSelectCustomBox = elSelectCustom.children[0];\nconst elSelectCustomOpts = elSelectCustom.children[1];\nconst customOptsList = Array.from(elSelectCustomOpts.children);\nconst optionsCount = customOptsList.length;\nconst defaultLabel = elSelectCustomBox.getAttribute('data-value');\n\nlet optionChecked = '';\nlet optionHoveredIndex = -1;\n\n// Toggle custom select visibility when clicking the box\nelSelectCustomBox.addEventListener('click', e => {\n  const isClosed = !elSelectCustom.classList.contains('isActive');\n\n  if (isClosed) {\n    openSelectCustom();\n  } else {\n    closeSelectCustom();\n  }\n});\n\nfunction openSelectCustom() {\n  elSelectCustom.classList.add('isActive');\n  // Remove aria-hidden in case this was opened by a user\n  // who uses AT (e.g. Screen Reader) and a mouse at the same time.\n  elSelectCustom.setAttribute('aria-hidden', false);\n\n  if (optionChecked) {\n    const optionCheckedIndex = customOptsList.findIndex(\n      el => el.getAttribute('data-value') === optionChecked\n    );\n    updateCustomSelectHovered(optionCheckedIndex);\n  }\n\n  // Add related event listeners\n  document.addEventListener('click', watchClickOutside);\n  document.addEventListener('keydown', supportKeyboardNavigation);\n}\n\nfunction closeSelectCustom() {\n  elSelectCustom.classList.remove('isActive');\n\n  elSelectCustom.setAttribute('aria-hidden', true);\n\n  updateCustomSelectHovered(-1);\n\n  // Remove related event listeners\n  document.removeEventListener('click', watchClickOutside);\n  document.removeEventListener('keydown', supportKeyboardNavigation);\n}\n\nfunction updateCustomSelectHovered(newIndex) {\n  const prevOption = elSelectCustomOpts.children[optionHoveredIndex];\n  const option = elSelectCustomOpts.children[newIndex];\n\n  if (prevOption) {\n    prevOption.classList.remove('isHover');\n  }\n  if (option) {\n    option.classList.add('isHover');\n  }\n\n  optionHoveredIndex = newIndex;\n}\n\nfunction updateCustomSelectChecked(value, text) {\n  const prevValue = optionChecked;\n\n  const elPrevOption = elSelectCustomOpts.querySelector(\n    `[data-value=\"${prevValue}\"`\n  );\n  const elOption = elSelectCustomOpts.querySelector(`[data-value=\"${value}\"`);\n\n  if (elPrevOption) {\n    elPrevOption.classList.remove('isActive');\n  }\n\n  if (elOption) {\n    elOption.classList.add('isActive');\n  }\n\n  elSelectCustomBox.textContent = text;\n  optionChecked = value;\n}\n\nfunction watchClickOutside(e) {\n  const didClickedOutside = !elSelectCustom.contains(event.target);\n  if (didClickedOutside) {\n    closeSelectCustom();\n  }\n}\n\nfunction supportKeyboardNavigation(e) {\n  // press down -> go next\n  if (event.keyCode === 40 && optionHoveredIndex < optionsCount - 1) {\n    let index = optionHoveredIndex;\n    e.preventDefault(); // prevent page scrolling\n    updateCustomSelectHovered(optionHoveredIndex + 1);\n  }\n\n  // press up -> go previous\n  if (event.keyCode === 38 && optionHoveredIndex > 0) {\n    e.preventDefault(); // prevent page scrolling\n    updateCustomSelectHovered(optionHoveredIndex - 1);\n  }\n\n  // press Enter or space -> select the option\n  if (event.keyCode === 13 || event.keyCode === 32) {\n    e.preventDefault();\n\n    const option = elSelectCustomOpts.children[optionHoveredIndex];\n    const value = option && option.getAttribute('data-value');\n\n    if (value) {\n      elSelectNative.value = value;\n      updateCustomSelectChecked(value, option.textContent);\n    }\n    closeSelectCustom();\n  }\n\n  // press ESC -> close selectCustom\n  if (event.keyCode === 27) {\n    closeSelectCustom();\n  }\n}\n\n// Update selectCustom value when selectNative is changed.\nelSelectNative.addEventListener('change', e => {\n  const value = e.target.value;\n  const elRespectiveCustomOption = elSelectCustomOpts.querySelectorAll(\n    `[data-value=\"${value}\"]`\n  )[0];\n\n  updateCustomSelectChecked(value, elRespectiveCustomOption.textContent);\n});\n\n// Update selectCustom value when an option is clicked or hovered\ncustomOptsList.forEach(function (elOption, index) {\n  elOption.addEventListener('click', e => {\n    const value = e.target.getAttribute('data-value');\n\n    // Sync native select to have the same value\n    elSelectNative.value = value;\n    updateCustomSelectChecked(value, e.target.textContent);\n    closeSelectCustom();\n  });\n\n  elOption.addEventListener('mouseenter', e => {\n    updateCustomSelectHovered(index);\n  });\n\n  // TODO: Toggle these event listeners based on selectCustom visibility\n});\n"],"names":["$87cdd3210fccc71c$var$elSelectNative","document","getElementsByClassName","$87cdd3210fccc71c$var$elSelectCustom","$87cdd3210fccc71c$var$elSelectCustomBox","children","$87cdd3210fccc71c$var$elSelectCustomOpts","$87cdd3210fccc71c$var$customOptsList","Array","from","$87cdd3210fccc71c$var$optionsCount","length","getAttribute","$87cdd3210fccc71c$var$optionChecked","$87cdd3210fccc71c$var$optionHoveredIndex","$87cdd3210fccc71c$var$closeSelectCustom","classList","remove","setAttribute","$87cdd3210fccc71c$var$updateCustomSelectHovered","removeEventListener","$87cdd3210fccc71c$var$watchClickOutside","$87cdd3210fccc71c$var$supportKeyboardNavigation","newIndex","prevOption","option","add","$87cdd3210fccc71c$var$updateCustomSelectChecked","value","text","prevValue","elPrevOption","querySelector","elOption","textContent","e","contains","event","target","keyCode","preventDefault","addEventListener","findIndex","el","$87cdd3210fccc71c$var$openSelectCustom","querySelectorAll","forEach","index"],"version":3,"file":"take-order.7696a956.js.map"}